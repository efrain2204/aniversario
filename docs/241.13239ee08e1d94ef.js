"use strict";(self.webpackChunkaniversario=self.webpackChunkaniversario||[]).push([[241],{2241:(j,C,r)=>{r.r(C),r.d(C,{NotesModule:()=>W});var a=r(177),E=r(6143),t=r(540),l=function(s){return s.all="all",s.active="active",s.completed="completed",s}(l||{});let p=(()=>{class s{constructor(){this.todosSig=(0,t.vPA)([]),this.filterSig=(0,t.vPA)(l.all)}changeFilter(e){this.filterSig.set(e)}addTodo(e,o){const i={text:e,isCompleted:!1,id:o};this.todosSig.update(n=>[...n,i])}changeTodo(e,o){this.todosSig.update(i=>i.map(n=>n.id===e?{...n,text:o}:n))}removeTodo(e){this.todosSig.update(o=>o.filter(i=>i.id!==e))}toggleTodo(e){this.todosSig.update(o=>o.map(i=>i.id===e?{...i,isCompleted:!i.isCompleted}:i))}toggleAll(e){this.todosSig.update(o=>o.map(i=>({...i,isCompleted:e})))}static{this.\u0275fac=function(o){return new(o||s)}}static{this.\u0275prov=t.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var c=r(5132),_=r(8455);let h=(()=>{class s{constructor(){this.firestore=(0,t.WQX)(c._7),this.todosCollection=(0,c.rJ)(this.firestore,"todos")}getTodos(){return(0,c.xs)(this.todosCollection,{idField:"id"})}addTodo(e){const i=(0,c.gS)(this.todosCollection,{text:e,isCompleted:!1}).then(n=>n.id);return(0,_.H)(i)}removeTodo(e){const o=(0,c.H9)(this.firestore,"todos/"+e),i=(0,c.kd)(o);return(0,_.H)(i)}updateTodo(e,o){const i=(0,c.H9)(this.firestore,"todos/"+e),n=(0,c.BN)(i,o);return(0,_.H)(n)}static{this.\u0275fac=function(o){return new(o||s)}}static{this.\u0275prov=t.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})(),S=(()=>{class s{constructor(){this.todosService=(0,t.WQX)(p),this.todosFirebaseService=(0,t.WQX)(h),this.text=""}changeText(e){this.text=e.target.value}addTodo(){this.todosFirebaseService.addTodo(this.text).subscribe(e=>{this.todosService.addTodo(this.text,e),this.text=""})}static{this.\u0275fac=function(o){return new(o||s)}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-header"]],decls:4,vars:1,consts:[[1,"header"],["placeholder","What needs to be done?","autoFocus","",1,"new-todo",3,"value","keyup","keyup.enter"]],template:function(o,i){1&o&&(t.j41(0,"header",0)(1,"h1"),t.EFF(2,"todos"),t.k0s(),t.j41(3,"input",1),t.bIt("keyup",function(d){return i.changeText(d)})("keyup.enter",function(){return i.addTodo()}),t.k0s()()),2&o&&(t.R7$(3),t.Y8G("value",i.text))}})}}return s})();const F=function(s){return{hidden:s}},m=function(s){return{selected:s}};let k=(()=>{class s{constructor(){this.todosService=(0,t.WQX)(p),this.filterSig=this.todosService.filterSig,this.filterEnum=l,this.activeCount=(0,t.EWP)(()=>this.todosService.todosSig().filter(e=>!e.isCompleted).length),this.noTodosClass=(0,t.EWP)(()=>0===this.todosService.todosSig().length),this.itemsLeftText=(0,t.EWP)(()=>`item${1!==this.activeCount()?"s":""} left`)}changeFilter(e,o){e.preventDefault(),this.todosService.changeFilter(o),console.log("after changeFilter",this.todosService.filterSig())}static{this.\u0275fac=function(o){return new(o||s)}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-footer"]],decls:15,vars:14,consts:[[1,"footer",3,"ngClass"],[1,"todo-count"],[1,"filters"],["href","/",3,"ngClass","click"]],template:function(o,i){1&o&&(t.j41(0,"footer",0)(1,"span",1)(2,"strong"),t.EFF(3),t.k0s(),t.EFF(4),t.k0s(),t.j41(5,"ul",2)(6,"li")(7,"a",3),t.bIt("click",function(d){return i.changeFilter(d,i.filterEnum.all)}),t.EFF(8,"All"),t.k0s()(),t.j41(9,"li")(10,"a",3),t.bIt("click",function(d){return i.changeFilter(d,i.filterEnum.active)}),t.EFF(11,"Active"),t.k0s()(),t.j41(12,"li")(13,"a",3),t.bIt("click",function(d){return i.changeFilter(d,i.filterEnum.completed)}),t.EFF(14,"Completed"),t.k0s()()()()),2&o&&(t.Y8G("ngClass",t.eq3(6,F,i.noTodosClass())),t.R7$(3),t.JRh(i.activeCount()),t.R7$(1),t.SpI(" ",i.itemsLeftText()," "),t.R7$(3),t.Y8G("ngClass",t.eq3(8,m,i.filterSig()===i.filterEnum.all)),t.R7$(3),t.Y8G("ngClass",t.eq3(10,m,i.filterSig()===i.filterEnum.active)),t.R7$(3),t.Y8G("ngClass",t.eq3(12,m,i.filterSig()===i.filterEnum.completed)))},dependencies:[a.YU]})}}return s})();var I=r(7468);const g=["textInput"];function u(s,A){if(1&s){const e=t.RV6();t.qex(0),t.j41(1,"input",6,7),t.bIt("keyup",function(i){t.eBV(e);const n=t.XpG();return t.Njj(n.changeText(i))})("keyup.enter",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.changeTodo())}),t.k0s(),t.bVm()}if(2&s){const e=t.XpG();t.R7$(1),t.Y8G("value",e.editingText)}}const v=function(s,A){return{editing:s,completed:A}};let y=(()=>{class s{constructor(){this.setEditingId=new t.bkB,this.todosService=(0,t.WQX)(p),this.todosFirebaseService=(0,t.WQX)(h),this.editingText=""}ngOnInit(){this.editingText=this.todo.text}ngOnChanges(e){e.isEditing.currentValue&&setTimeout(()=>{this.textInput?.nativeElement.focus()},0)}changeText(e){this.editingText=e.target.value}changeTodo(){this.todosFirebaseService.updateTodo(this.todo.id,{text:this.editingText,isCompleted:this.todo.isCompleted}).subscribe(()=>{this.todosService.changeTodo(this.todo.id,this.editingText)}),this.setEditingId.emit(null)}setTodoInEditMode(){this.setEditingId.emit(this.todo.id)}removeTodo(){this.todosFirebaseService.removeTodo(this.todo.id).subscribe(()=>{this.todosService.removeTodo(this.todo.id)})}toggleTodo(){this.todosFirebaseService.updateTodo(this.todo.id,{text:this.todo.text,isCompleted:!this.todo.isCompleted}).subscribe(()=>{this.todosService.toggleTodo(this.todo.id)})}static{this.\u0275fac=function(o){return new(o||s)}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-notes-atomic"]],viewQuery:function(o,i){if(1&o&&t.GBs(g,5),2&o){let n;t.mGM(n=t.lsd())&&(i.textInput=n.first)}},inputs:{todo:"todo",isEditing:"isEditing"},outputs:{setEditingId:"setEditingId"},features:[t.OA$],decls:7,vars:7,consts:[[3,"ngClass"],[1,"view"],["type","checkbox",1,"toggle",3,"checked","change"],[3,"dblclick"],[1,"destroy",3,"click"],[4,"ngIf"],[1,"edit",3,"value","keyup","keyup.enter"],["textInput",""]],template:function(o,i){1&o&&(t.j41(0,"li",0)(1,"div",1)(2,"input",2),t.bIt("change",function(){return i.toggleTodo()}),t.k0s(),t.j41(3,"label",3),t.bIt("dblclick",function(){return i.setTodoInEditMode()}),t.EFF(4),t.k0s(),t.j41(5,"button",4),t.bIt("click",function(){return i.removeTodo()}),t.k0s()(),t.DNE(6,u,3,1,"ng-container",5),t.k0s()),2&o&&(t.Y8G("ngClass",t.l_i(4,v,i.isEditing,i.todo.isCompleted)),t.R7$(2),t.Y8G("checked",i.todo.isCompleted),t.R7$(2),t.JRh(i.todo.text),t.R7$(2),t.Y8G("ngIf",i.isEditing))},dependencies:[a.YU,a.bT]})}}return s})();function b(s,A){if(1&s){const e=t.RV6();t.j41(0,"app-notes-atomic",5),t.bIt("setEditingId",function(i){t.eBV(e);const n=t.XpG();return t.Njj(n.setEditingId(i))}),t.k0s()}if(2&s){const e=A.$implicit,o=t.XpG();t.Y8G("todo",e)("isEditing",o.editingId===e.id)}}const f=function(s){return{hidden:s}};let T=(()=>{class s{constructor(){this.todosService=(0,t.WQX)(p),this.todosFirebaseService=(0,t.WQX)(h),this.editingId=null,this.visibleTodos=(0,t.EWP)(()=>{const e=this.todosService.todosSig(),o=this.todosService.filterSig();return o===l.active?e.filter(i=>!i.isCompleted):o===l.completed?e.filter(i=>i.isCompleted):e}),this.isAllTodosSelected=(0,t.EWP)(()=>this.todosService.todosSig().every(e=>e.isCompleted)),this.noTodosClass=(0,t.EWP)(()=>0===this.todosService.todosSig().length)}setEditingId(e){this.editingId=e}toggleAllTodos(e){const o=e.target,i=this.todosService.todosSig().map(n=>this.todosFirebaseService.updateTodo(n.id,{text:n.text,isCompleted:o.checked}));(0,I.p)(i).subscribe(()=>{this.todosService.toggleAll(o.checked)})}static{this.\u0275fac=function(o){return new(o||s)}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-main"]],decls:6,vars:5,consts:[[1,"main",3,"ngClass"],["id","toggle-all","type","checkbox",1,"toggle-all",3,"checked","change"],["for","toggle-all"],[1,"todo-list"],[3,"todo","isEditing","setEditingId",4,"ngFor","ngForOf"],[3,"todo","isEditing","setEditingId"]],template:function(o,i){1&o&&(t.j41(0,"section",0)(1,"input",1),t.bIt("change",function(d){return i.toggleAllTodos(d)}),t.k0s(),t.j41(2,"label",2),t.EFF(3,"Mark all as completed"),t.k0s(),t.j41(4,"ul",3),t.DNE(5,b,1,2,"app-notes-atomic",4),t.k0s()()),2&o&&(t.Y8G("ngClass",t.eq3(3,f,i.noTodosClass())),t.R7$(1),t.Y8G("checked",i.isAllTodosSelected()),t.R7$(4),t.Y8G("ngForOf",i.visibleTodos()))},dependencies:[a.YU,a.Sq,y]})}}return s})();const O=[{path:"",component:(()=>{class s{constructor(){this.todosService=(0,t.WQX)(p),this.todosFirebaseService=(0,t.WQX)(h)}ngOnInit(){this.todosFirebaseService.getTodos().subscribe(e=>{this.todosService.todosSig.set(e)})}static{this.\u0275fac=function(o){return new(o||s)}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-notes-layout"]],decls:4,vars:0,consts:[[1,"todoapp"]],template:function(o,i){1&o&&(t.j41(0,"div",0),t.nrm(1,"app-header")(2,"app-main")(3,"app-footer"),t.k0s())},dependencies:[S,k,T]})}}return s})()}];let R=(()=>{class s{static{this.\u0275fac=function(o){return new(o||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[E.iI.forChild(O),E.iI]})}}return s})(),W=(()=>{class s{static{this.\u0275fac=function(o){return new(o||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[a.MD,R]})}}return s})()},7468:(j,C,r)=>{r.d(C,{p:()=>h});var a=r(1985),E=r(3073),t=r(8750),l=r(3794),p=r(4360),c=r(6450),_=r(8496);function h(...S){const F=(0,l.ms)(S),{args:m,keys:k}=(0,E.D)(S),I=new a.c(g=>{const{length:u}=m;if(!u)return void g.complete();const v=new Array(u);let y=u,b=u;for(let f=0;f<u;f++){let T=!1;(0,t.Tg)(m[f]).subscribe((0,p._)(g,M=>{T||(T=!0,b--),v[f]=M},()=>y--,void 0,()=>{(!y||!T)&&(b||g.next(k?(0,_.e)(k,v):v),g.complete())}))}});return F?I.pipe((0,c.I)(F)):I}}}]);